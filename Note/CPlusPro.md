VS2019:使用OPENCV时需要导入test下面的temp2属性表，或者在属性列表中的链接器-输入-附加依赖项中加入450d(debug)或者450(release)

### 摄像头监控视频传输
- [socket原理](https://blog.csdn.net/ziyonghong/article/details/83663403)
- [send和recv函数](https://www.cnblogs.com/jianqiang2010/archive/2010/08/20/1804598.html)

#### [服务器端](https://blog.csdn.net/u010925447/article/details/77102318)

```
1.导入必要的头文件如opencv Winsock2 Windows 并加载必要的dll文件以及禁用警告
2.定义常量，使用cv的命名空间，定义需要传输的数据结构体，里面包含数据信息以及flag（有助于确认当前数据包是否是一个图像的结束）
3.定义并完成传输函数，输入为目标客户端以及传输图像，函数主要功能为把图像信息分为n个数据包进行传输，放到指定的data中并使用send函数传输给客户端，具体实现方式为：循环n个数据包，每个数据包都要单独发送，但是带着的flag并不一定相同，如果是图像的最后一个分包则标记为2，否则标记为1；对于每一个分包，首先确认需要发送的起始行，然后循环需要处理的行数（所有数据包的行数都是平均数 一致），然后计算data的起始点，因为不同行的像素点都是重新计算，而data是一行里计算，所以起始点计算方式为该包的第i行称每一行的所有像素点个数，然后取出该行的行指针，最后一层循环取出改行的所有像素点，放入到data中即可，处理完一个数据包以后再赋值flag值，最后即可发送，send的参数有四个，第一个为目标客户端信息，第二个为data信息，需要转为char类型，第三个为数据包的字节大小，最后一个为0.
4.主函数首先打开摄像头获得原始数据，然后初始化网络传输模块的DLL，创建套接字（定义服务器的类型并实例化），绑定套接字（填充服务器的各个参数，如传输协议、IP地址、端口号），开始进入监听状态，一旦接收到以后开始接收客户端的请求，开始循环发送数据即可；
5.最后关闭客户端以及服务器的实例化对象，并关闭DLL的使用，退出主循环。
```


#### 客户端

```
1.导入三个头文件并加载dll 禁用警告 定义常量 结构题 实现接收函数（传入服务器，返回一个图像）
2.接收函数：定义空的图像数据，分n次接收数据包，对于每个数据包，首先接收到完整的数据包所有信息（直接接收缓冲区接受满为止），然后循环赋值给空白图像，首先计算起始行数，然后循环需要填充的行数，取出改行的行指针，然后循环访问改行所有像素点进行赋值；最后根据传输的标志判断是否是最后一个数据包，是的话接收完成进行返回mat数据。
3.主函数：初始虎啊DLL 创建套接字 构建ip地址  开始链接服务器  连接上以后进行接收循环，接收到一个图片显示一个图片，检测到按键时退出；
4.关闭客户端 终止DLL。
```










